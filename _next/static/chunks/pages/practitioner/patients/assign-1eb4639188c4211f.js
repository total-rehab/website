(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[341],{3075:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/practitioner/patients/assign",function(){return r(2152)}])},9116:function(e,t,r){"use strict";r.d(t,{b:function(){return s}});var a=r(5893),l=r(3637),i=r(4184),n=r.n(i);let s=e=>{let{type:t,className:r,children:i}=e;return(0,a.jsxs)("div",{className:n()("p-4 mb-4 text-sm rounded-lg",{error:"text-red-800 bg-red-50",success:"text-green-800 bg-green-50",warning:"text-yellow-800 bg-yellow-50",info:"text-blue-800 bg-blue-50"}[t],r),role:"alert",children:[(0,a.jsx)("p",{className:"font-bold mb-2",children:(0,l.G)(t)}),(0,a.jsx)("p",{children:i})]})}},5740:function(e,t,r){"use strict";r.d(t,{I:function(){return n}});var a=r(5893),l=r(4184),i=r.n(l);let n=e=>{let{label:t,name:r,placeholder:l,required:n,disabled:s,type:u="text",onChange:o,value:d}=e;return(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:r,className:"block mb-1 font-medim text-gray-900 dark:text-white",children:t}),(0,a.jsx)("input",{type:u,id:r,name:r,disabled:s,onChange:o,value:d,className:i()("border border-gray-400 text-gray-900 text-sm rounded focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",s?"bg-gray-150 cursor-not-allowed":"bg-white"),placeholder:l,required:n})]})}},3774:function(e,t,r){"use strict";r.d(t,{l:function(){return l}});var a=r(5893);let l=e=>{let{label:t,name:r,placeholder:l,required:i,options:n,value:s,onChange:u}=e;return(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:r,className:"block mb-1 font-medim text-gray-900 dark:text-white",children:t}),(0,a.jsx)("select",{id:r,name:r,value:s,onChange:u,className:"bg-white border border-gray-400 text-gray-900 text-sm rounded focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",placeholder:l,required:i,children:n.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))})]})}},2152:function(e,t,r){"use strict";r.r(t);var a=r(5893),l=r(7294),i=r(7837),n=r(9501),s=r(1163),u=r(7458),o=r(9557),d=r(7311),c=r(1993),g=r(8344),m=r(5740),b=r(7543),p=r(3774),h=r(9116),f=r(8506);let v=[{label:"Light",value:"LIGHT"},{label:"Moderate",value:"MODERATE"},{label:"Intensive",value:"INTENSIVE"}],x=e=>{let t=(0,u.Z)(e,"dd-MM-yyyy",new Date),r=(0,o.Z)(new Date,t);return r},y=()=>{let e=(0,g.H)(),t=(0,l.useRef)(null),[r,u]=(0,l.useState)(""),[o,y]=(0,l.useState)(!1),[j,w]=(0,l.useState)(v[0].value),[N,S]=(0,l.useState)(),q=(0,s.useRouter)(),{data:I}=(0,i.a)(["programs"],()=>e.getPrograms({query:{filter:{activityLevel:j,isForOver60s:String(N&&x(N)>=60)}}}));console.log(I);let{data:_,isLoading:E}=(0,i.a)(["patient",q.query.guid],()=>e.getPatient({params:{guid:String(q.query.guid)}}),{enabled:!!q.query.guid}),k=async t=>{var r,a,l;t.preventDefault(),q.query.guid||u("No user GUID found"),y(!0);let i=new FormData(t.currentTarget),s=null===(r=i.get("activityLevel"))||void 0===r?void 0:r.toString(),o=null===(a=i.get("dateOfBirth"))||void 0===a?void 0:a.toString(),d=null===(l=i.get("programId"))||void 0===l?void 0:l.toString();if(!o||!s||!d){y(!1),u("Please complete all form fields");return}let c={activityLevel:s,dateOfBirth:new Date(o).toISOString(),programId:Number(d)};try{await e.updatePatient({params:{guid:String(q.query.guid)},data:c})}catch(g){(0,n.isOpenApiClientError)(g)&&u(g.data&&"message"in g.data?g.data.message:g.message),u(String(g)),y(!1);return}q.push("/practitioner/patients")},O=()=>{u("")},T=e=>{S(e.target.value)},C=e=>{w(e.target.value)};return(0,l.useEffect)(()=>{q.query.guid||q.push("/practitioner/patients")},[q]),(0,a.jsx)(d.T,{hideHeader:!0,title:"Sign up",description:"Sign up to the Total Rehab app",children:(0,a.jsxs)(c.c,{children:[(0,a.jsx)("div",{className:"md:flex-[60%]",children:(0,a.jsx)("p",{className:"text-xl mb-8",children:"Update the patient's details below and assign them to a program."})}),r&&(0,a.jsx)(h.b,{type:"error",className:"mb-8",children:r}),(null==_?void 0:_.programId)&&(0,a.jsx)(h.b,{type:"warning",className:"mb-8",children:"A program has already been assigned to this user. You can assign a new program, but it will clear all of their current progress on the existing program."}),E?(0,a.jsx)(f.T,{className:"items-center justify-center flex mt-10"}):(0,a.jsxs)("form",{ref:t,onSubmit:k,onChange:O,className:"space-y-7",children:[(0,a.jsx)(p.l,{required:!0,label:"Activity level",name:"activityLevel",value:j,onChange:C,options:v}),(0,a.jsx)(m.I,{required:!0,type:"date",label:"Date of birth",name:"dateOfBirth",value:N,onChange:T}),(null==I?void 0:I.items)&&N&&j&&(0,a.jsx)(p.l,{required:!0,label:"Program",name:"programId",options:I.items.map(e=>({label:e.title,value:e.id}))}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)(b.z,{isSubmitButton:!0,isLoading:o,children:"Submit"})})]})]})})};t.default=y}},function(e){e.O(0,[989,963,895,362,173,986,774,888,179],function(){return e(e.s=3075)}),_N_E=e.O()}]);